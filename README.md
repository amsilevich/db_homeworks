# ДЗ №1

## 1. Установка mongodb и импорт csv-файла

- Установка
- ![image](images/1.jpg)
- Запуск
- ![image]()
- Импорт csv-файла
- ![image]()
- Вывод первых пяти объектов
- ![image]()

## 2. Запросы на выборку и обновление данных
 - Средний годовой доход женщин в возрасте от 20 до 30 лет
- ![image]()
 - Мужчины-пенсионеры, с объемом трат 30 процентов
- ![image]()
 - Увеличить на 1 год возраст всем клиентам
- ![image]()
 - Повторим предыдущую операцию, чтобы убедиться, что возраст действительно поменялся
- ![image]()
 - Уменьшить заработную плату клиента, имеющего 111 id, на 2 тысячи долларов в год
- ![image]()

## 3. Индексы
- Чтобы протестировать индексы, cгенерируем датасет побольше с помощью такой нехитрой программы generator.cpp.
- ![image]()
- Создадим новую базу, предаврительно, сделаем к ней парочку старых запросов.
- ![image]()
- Очевидно, что при работе с нашей базой, пригодятся уникальные индесы, а не разреженные, поскольку в датасете содержатся только размеченные данные
- ![image]()
- Создадим по отдельности два индескса (по возрасту и полу) и замерим время исполения запроса, а затем создадим индекс, который будет включать себя все поля из нашего запроса.
- ![image]()
- На основе физического измерения времени можно заметить, что наличие индекса по возрасту существенно ускорило время обработки запроса(в 6-7 раз), в то время как индекс по полу практически не внес вклада в скорость. Это легко можно объяснить тем, что пола всего два, их распределение примерно одинаково, соответственно, такая структура, как B-дерево позволит лишь найти границу разделения мужского и женского пола, соотвественно, соотвественно, вместо полного перебора, нам придется перебрать лишь половину элементов, что также в общем-то много, поэтому выигрыш оказался несущественным, в отличие от первого индекса, который по сути дела сразу отсекает большую чатсь датасета (примерно 84 процента) и дальнейшая работа ведется внутри этого не очень большого надмножетсва, соовтественно перебор занимает примерно 1/6 от объема всего датасета. Третий же индекс показал себя чуть лучше, чем первый - это не увидительно, поскольку он фактически создан под неш запрос с целью максимально его оптимизировать (оптимизируются сразу два поля, соответственно профит от этого - произведение профитов обоих индексов, то есть запрос тал выполняться примерно в 12 раз быстрее).

# Результат работы:
- Скачана MongoDB, фактически создан с нуля большой датасет.
- Создано некоторое количество осмысленных запросов к ней, включая обновление уже существующих данных.
- Исследовано такое понятие, как индексы, произведен отбор и анализ использования различных индексов в конкретной задаче на конкретном запросе.
