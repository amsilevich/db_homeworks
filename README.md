# 1. Установка mongodb и импорт csv-файла

## Установка
![image](images/1.jpg)
![image](images/2.jpg)
## Запуск
![image](images/3.jpg)
## Создание базы данных
![image](images/4.jpg)
## Импорт csv-файла
![image](images/5.jpg)
## Вывод первых пяти объектов
- ![image](images/7.jpg)

# 2. Запросы на выборку и обновление данных

## Средний годовой доход женщин в возрасте от 20 до 30 лет
![image](images/8.jpg)
## Мужчины-пенсионеры, с объемом трат более 50%
![image](images/9.jpg)
## Увеличить на 1 год возраст всем клиентам
![image](images/10.jpg)
## Повторим предыдущую операцию, чтобы убедиться, что возраст действительно поменялся
![image](images/11.jpg)
## Уменьшить заработную плату клиента, имеющего 111 id, на 2 тысячи долларов в год
![image](images/12.jpg)

# 3. Индексы
## Чтобы протестировать индексы, cгенерируем датасет побольше с помощью нехитрой программы generator.cpp. Создадим новую базу, сделаем к ней парочку старых запросов.
![image](images/13.jpg) 

## Очевидно, что при работе с нашей базой пригодятся уникальные индексы, а не разреженные, поскольку в датасете содержатся только размеченные данные. Создадим по отдельности два индекса (по возрасту и полу) и замерим время исполнения запроса, а затем создадим индекс, который будет включать себя все поля из нашего запроса.
![image](images/14.jpg)
![image](images/15.jpg)
![image](images/16.jpg)
![image](images/17.jpg)
## На основе физического измерения времени можно заметить, что наличие индекса по возрасту существенно ускорило время обработки запроса(в 6-7 раз), в то время как индекс по полу практически не внес вклада в скорость. Это легко можно объяснить тем, что пола всего два, их распределение примерно одинаково, соответственно, такая структура, как B-дерево, позволит лишь найти границу разделения мужского и женского пола, соответственно,  вместо полного перебора, нам придется перебрать лишь половину элементов, что также, в общем-то, много, поэтому выигрыш оказался несущественным, в отличие от первого индекса, который по сути дела сразу отсекает бо́льшую часть датасета(примерно 84 процента), и дальнейшая работа ведется внутри этого не очень большого подмножества, соответственно, перебор занимает примерно 1/6 от объема всего датасета. Третий же индекс показал себя чуть лучше, чем первый - это не удивительно, поскольку он фактически создан под наш запрос с целью максимально его оптимизировать (оптимизируются сразу два поля, соответственно профит от этого - произведение профитов обоих индексов, то есть запрос стал выполняться примерно в 12 раз быстрее).

# Результат работы:
- Скачана MongoDB, фактически создан с нуля большой датасет.
- Создано некоторое количество осмысленных запросов к ней, включая обновление уже существующих данных.
- Исследовано такое понятие, как индексы, произведен отбор и анализ использования различных индексов в конкретной задаче на конкретном запросе.
